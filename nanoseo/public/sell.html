<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" type="text/css" href="stylesheets/bootstrap.min.css" media='screen' />
  <link rel="stylesheet" type="text/css" href="stylesheets/bootstrap-slider.css" />
  <script src="javascripts/lib/jquery.min.js"></script>
  <script src="javascripts/util.js"></script>
  <script type="text/javascript" src="javascripts/lib/highcharts.js"></script>
  <script type="text/javascript" src="javascripts/lib/bootstrap-slider.js"></script>
  <script type="text/javascript" src="javascripts/lib/bootstrap.min.js"></script>
  <script src="javascripts/realtime.js"></script>
  <title>SELL</title>
</head>
<body>
  <div class="jumbotron">
    <div class="container">
      <h1>에너지마켓</h1>
    </div>
  </div>
  <div class="container">

    <div class="col-lg-4">
      <h2 id="sellable"></h2>
    </div>

    <div class="col-lg-4">
      <p>판매량 설정</p>
      <input id="ex1" data-slider-id='ex1Slider' type="range"
      data-slider-min="0" data-slider-max="40" data-slider-step="1" data-slider-value="20" />
      <p id="sliderValue"></p>
    </div>

    <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" onclick="clickSell();">판매</button>
    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">확인</h4>
          </div>
          <div class="modal-body">
            <p id="sellMessage"></p>
          </div>
          <div class="modal-footer">
              <!--
              <a id="confirmBtn" class="btn btn-default" data-dismiss="modal" href="sell_result.html">등록</a>
                -->

            <button id="confirmBtn" type="button" class="btn btn-default" data-dismiss="modal">등록</button>

                  <button type="button" class="btn btn-default" data-dismiss="modal">취소</button>
          </div>
        </div>

      </div>
    </div>
  </div>
  <script type="text/javascript">
      function clickSell() {
          window.link = "location.href='sell_result.html?quantity=" + window.quantity + "&cost=" + window.cost+"'";
          console.log(window.link);
          $('#confirmBtn').attr('onClick', window.link);


      }
      window.unitPrice = 200; // TODO: it SHOULD be removed
  var slider = new Slider('#ex1', {
    formatter: function (value) {
        $('#sliderValue').text(value + 'kW 판매');
        window.quantity = value;
        window.cost = value * window.unitPrice * 1.2;
        $('#sellMessage').text(window.quantity + 'kW == ' + window.cost + '원 판매');
      return 'Current value: ' + value;
    }
  });
  </script>
    <script type="text/javascript">
        window.capacity = 40;
        $('#sellable').text(window.capacity + 'kW 이하 판매 가능');
    </script>

</body>
</html>
